import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';
import { DialogService, DialogComponent } from "ng2-bootstrap-modal";  
import { BlockUI, NgBlockUI } from 'ng-block-ui'; 

@Component({
  selector: 'app-tabela-consultas',
  templateUrl: './tabela-consultas.component.html',
  styleUrls: ['./tabela-consultas.component.css']
})
export class TabelaConsultasComponent implements OnInit {

    @Input() nomesColunas: Array<string>;
    @Input() atributosColunas: Array<string>;
    @Input() exibeFiltro: boolean = true;
    @Input() listaDados: Array<any>;
    @Input() tamanhoListagem: number = 0;
    @Input() exibeBarra: boolean = true;
    @Input() exibeVisualizacao: boolean = false;

    @Output() onFilter = new EventEmitter();
    @Output() eventPesquisar = new EventEmitter();
    @Output() eventImprimir = new EventEmitter();
    @Output() eventLimpar = new EventEmitter();
    @Output() eventVisualizar = new EventEmitter<any>();

  
    @BlockUI() blockUI: NgBlockUI;


    public paginaAtual = 1;
    public itensPorPagina = 6;
    public indiceItem: number = -1;

    ngOnInit() {
    }

    abrirFiltro(){
       this.onFilter.emit();
    }    

    pesquisar(){
      this.blockUI.start('Consultando registros, aguarde...');
       this.eventPesquisar.emit();
    }

    imprimir(){
      this.blockUI.start('Imprimindo registros, aguarde...');
      this.eventImprimir.emit();
    }

    limpar(){
      this.eventLimpar.emit();
    }

    visualizar(item: any){
      this.eventVisualizar.emit(item);
    }

    public pararBloqueio(){
      this.blockUI.stop();
    }
}
